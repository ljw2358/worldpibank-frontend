mkdir worldpibank
cd worldpibank

# index.html ÏÉùÏÑ±
cat > index.html <<'EOF'
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>WorldPiBank</title>
  <style>
    :root{
      --brand1:#5b7bff; --brand2:#6bd1ff; --ink:#0e1320; --muted:#6b7280;
      --card:#ffffff; --bg:#f6f7fb; --shadow:0 8px 24px rgba(25,41,89,.12); --radius:20px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Pretendard,Apple SD Gothic Neo,Noto Sans KR,sans-serif}
    .header{position:sticky;top:0;z-index:10;background:linear-gradient(90deg,var(--brand1),var(--brand2));color:#fff;padding:18px 16px;display:flex;align-items:center;justify-content:flex-end}
    .actions{display:flex;gap:10px;align-items:center}
    .chip{padding:8px 14px;border-radius:999px;background:rgba(255,255,255,.28);font-weight:700;font-size:14px;backdrop-filter:blur(6px)}
    .chip.active{background:#0e1320;color:#fff}
    .btn{padding:10px 14px;border-radius:14px;background:rgba(255,255,255,.22);color:#fff;font-weight:700;border:2px solid rgba(255,255,255,.4)}
    .hero{padding:26px 16px 10px}
    .title{font-size:34px;line-height:1.15;margin:0 0 8px;font-weight:900;text-align:center}
    .subtitle{margin:0;color:var(--muted);font-size:18px;text-align:center}
    .grid{padding:14px 16px 120px;display:grid;grid-template-columns:1fr 1fr;gap:16px}
    .card{background:var(--card);border-radius:var(--radius);padding:22px;box-shadow:var(--shadow);display:flex;flex-direction:column;justify-content:center;align-items:flex-start;min-height:130px;cursor:pointer}
    .card h3{margin:0 0 8px;font-size:28px;font-weight:900}
    .card p{margin:0;color:var(--muted);font-weight:700}
    .card .emoji{font-size:34px;margin-bottom:10px}
    .qr{position:fixed;left:16px;bottom:16px;width:90px;height:90px;background:#fff;border-radius:14px;box-shadow:var(--shadow);display:flex;align-items:center;justify-content:center;overflow:hidden}
    .qr img{width:100%;height:100%;object-fit:cover}
    .chat{position:fixed;right:16px;bottom:16px;width:88px;height:88px;border-radius:22px;background:linear-gradient(135deg,var(--brand1),var(--brand2));box-shadow:var(--shadow);display:grid;place-items:center;color:#fff;font-size:28px}
    .badge{position:absolute;right:-6px;top:-6px;width:24px;height:24px;border-radius:999px;background:#ff3b5c;color:#fff;display:grid;place-items:center;font-weight:800;font-size:12px;border:3px solid #fff}
    @media (min-width:720px){.container{max-width:900px;margin:0 auto}.grid{grid-template-columns:repeat(3,1fr)}}
  </style>
</head>
<body>
  <header class="header">
    <div class="actions">
      <button class="chip active" data-lang="en">EN</button>
      <button class="chip" data-lang="ko">KR</button>
      <button class="chip" data-lang="zh">ZH</button>
      <a href="#" class="btn" id="loginBtn" data-i18n="login">Log in</a>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <h1 class="title" data-i18n="headline">WorldPiBank</h1>
      <p class="subtitle" data-i18n="tagline">The world's first digital bank</p>
    </section>

    <section class="grid">
      <article class="card" id="cardTransfer">
        <div class="emoji">üöÄ</div>
        <h3 data-i18n="send_title">Transfer</h3>
        <p data-i18n="send_desc">Fast & intuitive</p>
      </article>
      <article class="card" id="cardPay">
        <div class="emoji">üí≥</div>
        <h3 data-i18n="pay_title">Pay</h3>
        <p data-i18n="pay_desc">In-store ¬∑ Online</p>
      </article>
      <article class="card">
        <div class="emoji">üí∞</div>
        <h3 data-i18n="stake_title">Stake</h3>
        <p data-i18n="stake_desc">Secure asset management</p>
      </article>
      <article class="card">
        <div class="emoji">üè¶</div>
        <h3 data-i18n="ubi_title">UBI</h3>
        <p data-i18n="ubi_desc">Fair basic income</p>
      </article>
      <article class="card">
        <div class="emoji">‚òéÔ∏è</div>
        <h3 data-i18n="cs_title">Support</h3>
        <p><span data-i18n="id">ID</span>: ljw2358@naver.com</p>
      </article>
      <article class="card">
        <div class="emoji">üéÅ</div>
        <h3 data-i18n="reward_title">Rewards</h3>
        <p data-i18n="reward_desc">More you join, more you earn</p>
      </article>
    </section>
  </main>

  <div class="qr">
    <img alt="QR" src="data:image/svg+xml;utf8,
      <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 120'>
        <rect width='120' height='120' fill='white'/>
        <rect x='8' y='8' width='40' height='40' fill='black'/>
        <rect x='72' y='8' width='40' height='40' fill='black'/>
        <rect x='8' y='72' width='40' height='40' fill='black'/>
        <rect x='56' y='56' width='8' height='8' fill='black'/>
        <rect x='80' y='80' width='8' height='8' fill='black'/>
        <rect x='96' y='56' width='8' height='8' fill='black'/>
        <rect x='56' y='96' width='8' height='8' fill='black'/>
      </svg>"/>
  </div>

  <div class="chat">üí¨<div class="badge">1</div></div>

  <script>
    /* ---------- Îã§Íµ≠Ïñ¥ ---------- */
    const dict = {
      en:{login:"Log in",headline:"WorldPiBank",tagline:"The world's first digital bank",
          send_title:"Transfer",send_desc:"Fast & intuitive",
          pay_title:"Pay",pay_desc:"In-store ¬∑ Online",
          stake_title:"Stake",stake_desc:"Secure asset management",
          ubi_title:"UBI",ubi_desc:"Fair basic income",
          cs_title:"Support",id:"ID",
          reward_title:"Rewards",reward_desc:"More you join, more you earn"},
      ko:{login:"Î°úÍ∑∏Ïù∏",headline:"WorldPiBank",tagline:"ÏÑ∏Í≥ÑÏµúÏ¥àÏùò ÎîîÏßÄÌÑ∏ ÏùÄÌñâ",
          send_title:"ÏÜ°Í∏à",send_desc:"Îπ†Î•¥Í≥† ÏßÅÍ¥ÄÏ†Å",
          pay_title:"Í≤∞Ï†ú",pay_desc:"Îß§Ïû• ¬∑ Ïò®ÎùºÏù∏",
          stake_title:"ÏòàÏπò",stake_desc:"ÏïàÏ†ÑÌïú ÏûêÏÇ∞ Í¥ÄÎ¶¨",
          ubi_title:"UBI",ubi_desc:"Ï†ïÏùòÎ°úÏö¥ Í∏∞Î≥∏ÏÜåÎìù",
          cs_title:"Í≥†Í∞ùÏÑºÌÑ∞",id:"ID",
          reward_title:"Î¶¨ÏõåÎìú",reward_desc:"Ï∞∏Ïó¨Ìï†ÏàòÎ°ù Ïª§ÏßÄÎäî ÌòúÌÉù"},
      zh:{login:"ÁôªÂΩï",headline:"WorldPiBank",tagline:"ÂÖ®ÁêÉÈ¶ñÂÆ∂Êï∞Â≠óÈì∂Ë°å",
          send_title:"ËΩ¨Ë¥¶",send_desc:"Âø´ÈÄüÁõ¥ËßÇ",
          pay_title:"ÊîØ‰ªò",pay_desc:"Èó®Â∫ó ¬∑ Âú®Á∫ø",
          stake_title:"Â≠òÂÖ•",stake_desc:"ËµÑ‰∫ßÂÆâÂÖ®ÁÆ°ÁêÜ",
          ubi_title:"UBI",ubi_desc:"ÂÖ¨Âπ≥ÁöÑÂü∫Êú¨Êî∂ÂÖ•",
          cs_title:"ÂÆ¢Êúç‰∏≠ÂøÉ",id:"ID",
          reward_title:"Â•ñÂä±",reward_desc:"ÂèÇ‰∏éË∂äÂ§ö ÂõûÈ¶àË∂äÂ§ß"}
    };
    const applyLang = (lang) => {
      document.querySelectorAll("[data-i18n]").forEach(el=>{
        const key = el.getAttribute("data-i18n");
        if(dict[lang] && dict[lang][key]) el.textContent = dict[lang][key];
      });
      document.querySelectorAll(".chip").forEach(c=>c.classList.toggle("active", c.dataset.lang===lang));
      document.documentElement.lang = lang;
    };
    window.addEventListener("DOMContentLoaded", ()=>applyLang("en"));
    document.querySelectorAll(".chip").forEach(btn=>{
      btn.addEventListener("click", ()=>applyLang(btn.dataset.lang));
    });

    /* ---------- Pi SDK ---------- */
    const Pi = window.Pi;
    if (Pi && Pi.init) {
      Pi.init({ version: "2.0", sandbox: true });
    }

    async function piLogin() {
      if (!Pi) { alert("Pi SDK not detected. Use Pi Browser."); return; }
      try {
        const scopes = ["username","payments"];
        const authRes = await Pi.authenticate(scopes, onIncompletePaymentFound);
        alert(`Welcome, ${authRes?.user?.username || "Pioneer"}!`);
      } catch (e) { alert("Login failed: " + e.message); }
    }

    async function piPay(amount=1, memo="WorldPiBank demo") {
      if (!Pi) { alert("Pi SDK not detected."); return; }
      try {
        const payment = await Pi.createPayment({
          amount: amount.toString(),
          memo,
          metadata: { purpose:"demo" }
        }, {
          onReadyForServerApproval: async (paymentId) => {
            await fetch("https://YOUR_SERVER/api/pi/approve", {
              method:"POST",headers:{"Content-Type":"application/json"},
              body: JSON.stringify({ paymentId })
            });
          },
          onReadyForServerCompletion: async (paymentId, txid) => {
            await fetch("https://YOUR_SERVER/api/pi/complete", {
              method:"POST",headers:{"Content-Type":"application/json"},
              body: JSON.stringify({ paymentId, txid })
            });
            alert("Payment completed üéâ");
          }
        });
        console.log("payment created:", payment);
      } catch (e) { alert("Payment failed: " + e.message); }
    }

    function onIncompletePaymentFound(payment) {
      console.log("Incomplete payment found:", payment);
    }

    document.getElementById("loginBtn")?.addEventListener("click",(e)=>{ e.preventDefault(); piLogin(); });
    document.getElementById("cardTransfer")?.addEventListener("click",()=>piPay(1,"Transfer demo"));
    document.getElementById("cardPay")?.addEventListener("click",()=>piPay(3,"Pay demo"));
  </script>
</body>
</html>
EOF

# server.js
cat > server.js <<'EOF'
import express from "express";
import fetch from "node-fetch";
import dotenv from "dotenv";
dotenv.config();

const app = express();
app.use(express.json());

const PI_API = "https://api.minepi.com/v2";
const API_KEY = process.env.PI_API_KEY;
const APP_ID = process.env.PI_APP_ID;

app.post("/api/pi/approve", async (req, res) => {
  try {
    const { paymentId } = req.body;
    const r = await fetch(`${PI_API}/payments/${paymentId}/approve`, {
      method: "POST",
      headers: {
        "Authorization": `Key ${API_KEY}`,
        "Content-Type": "application/json"
      },
      body: "{}"
    });
    res.json(await r.json());
  } catch (err) {
    res.status(500).json({ error: err.message });
  }
});

app.post("/api/pi/complete", async (req, res) => {
  try {
    const { paymentId, txid } = req.body;
    const r = await fetch(`${PI_API}/payments/${paymentId}/complete`, {
      method: "POST",
      headers: {
        "Authorization": `Key ${API_KEY}`,
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ txid })
    });
    res.json(await r.json());
  } catch (err) {
    res.status(500).json({ error: err.message });
  }
});

app.get("/", (req, res) => {
  res.send("üåê WorldPiBank Pi Server running");
});

const PORT = process.env.PORT || 3000;
app.listen(PORT, () => console.log(`‚úÖ Pi server running at http://localhost:${PORT}`));
EOF

# package.json
cat > package.json <<'EOF'
{
  "name": "worldpibank",
  "version": "1.0.0",
  "main": "server.js",
  "type": "module",
  "scripts": {
    "start": "node server.js"
  },
  "dependencies": {
    "express": "^4.19.2",
    "node-fetch": "^3.3.2",
    "dotenv": "^16.4.5"
  }
}
EOF

# .env
cat > .env <<'EOF'
PI_API_KEY=Ïó¨Í∏∞Ïóê_API_KEY_ÏûÖÎ†•
PI_APP_ID=Ïó¨Í∏∞Ïóê_APP_ID_ÏûÖÎ†•
PORT=3000
EOF

# ÏïïÏ∂ï
cd ..
zip -r worldpibank.zip worldpibank
