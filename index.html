<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>WorldPiBank</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#5b2db1" />
  <link rel="icon" href="icons/icon-192.png" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />

  <style>
    body{margin:0;font-family:sans-serif;background:#0d031d;color:#fff}
    h1{margin:0;font-size:24px}
    .wrap{max-width:680px;margin:auto;padding:16px}
    .card{background:#1b0f3a;padding:16px;border-radius:12px;margin-bottom:12px}
    .lang{margin:10px 0;display:flex;gap:8px}
    .chip{padding:6px 10px;border-radius:999px;background:#2a1856;color:#fff;border:1px solid #a78bfa;cursor:pointer}
    .chip[aria-pressed="true"]{background:#8b5cf6}
    #install{display:none;position:fixed;bottom:16px;left:16px;right:16px;background:#14072b;padding:12px;border-radius:10px;gap:8px}
    #install.show{display:flex;justify-content:space-between;align-items:center}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1 id="t_title">WorldPiBank</h1>
      <p id="t_sub">The world's first Pi-based digital bank.</p>
      <div class="lang">
        <button class="chip" data-lang="en" aria-pressed="true">EN</button>
        <button class="chip" data-lang="ko" aria-pressed="false">KR</button>
        <button class="chip" data-lang="zh" aria-pressed="false">ZH</button>
      </div>
    </header>

    <main>
      <div class="card"><h3 id="t_pay">Payment</h3><p id="t_pay_d">Fast, low-fee Pi payments.</p></div>
      <div class="card"><h3 id="t_send">Remittance</h3><p id="t_send_d">Send Pi across borders instantly.</p></div>
      <div class="card"><h3 id="t_dep">Staking/Deposit</h3><p id="t_dep_d">Flexible terms, APY 31.4%.</p></div>
      <div class="card"><h3 id="t_rewards">Rewards</h3><p id="t_rewards_d">Earn perks with community activity.</p></div>
      <div class="card"><h3 id="t_ubi">UBI</h3><p id="t_ubi_d">Digital basic income for all.</p></div>
      <div class="card"><h3 id="t_cs">Help/FAQ</h3><p id="t_cs_d">KYC & security guidelines.</p></div>
    </main>
  </div>

  <div id="install">
    <span id="t_install_text">Install WorldPiBank?</span>
    <div>
      <button id="btnInstall">Install</button>
      <button id="btnLater">Later</button>
    </div>
  </div>

  <script>
    // i18n dictionary
    const dict={
      en:{t_title:"WorldPiBank",t_sub:"The world's first Pi-based digital bank.",t_pay:"Payment",t_pay_d:"Fast, low-fee Pi payments.",t_send:"Remittance",t_send_d:"Send Pi across borders instantly.",t_dep:"Staking / Deposit",t_dep_d:"Flexible terms, APY 31.4%.",t_rewards:"Rewards",t_rewards_d:"Earn perks with community activity.",t_ubi:"UBI",t_ubi_d:"Digital basic income for all.",t_cs:"Help/FAQ",t_cs_d:"KYC & security guidelines.",t_install_text:"Install WorldPiBank?"},
      ko:{t_title:"월드파이은행",t_sub:"세계 최초의 Pi 기반 디지털 은행",t_pay:"결제",t_pay_d:"빠르고 저렴한 Pi 결제",t_send:"송금",t_send_d:"국경을 넘어 즉시 송금",t_dep:"예치 / 스테이킹",t_dep_d:"유연한 기간, 투명한 금리(APY 31.4%)",t_rewards:"리워드",t_rewards_d:"커뮤니티 활동으로 혜택 적립",t_ubi:"기본소득",t_ubi_d:"모든 시민을 위한 디지털 기본소득",t_cs:"FAQ / 보안",t_cs_d:"KYC & 보안 가이드",t_install_text:"월드파이은행 앱을 설치하시겠습니까?"},
      zh:{t_title:"世界Pi银行",t_sub:"全球首个基于Pi的数字银行",t_pay:"支付",t_pay_d:"快速低费率的Pi支付",t_send:"汇款",t_send_d:"跨境即时转账Pi",t_dep:"存款 / 质押",t_dep_d:"灵活期限，透明收益(APY 31.4%)",t_rewards:"奖励",t_rewards_d:"社区活动赚取福利",t_ubi:"基本收入",t_ubi_d:"全民数字基本收入",t_cs:"帮助/FAQ",t_cs_d:"KYC和安全指南",t_install_text:"要安装WorldPiBank吗？"}
    };
    const $=s=>document.querySelector(s);const $$=s=>document.querySelectorAll(s);
    function applyLang(l){let d=dict[l]||dict.en;for(let k in d){let e=$("#"+k);if(e)e.textContent=d[k]}$$(".chip").forEach(b=>b.setAttribute("aria-pressed",String(b.dataset.lang===l)));localStorage.setItem("wpb_lang",l)}
    const saved=localStorage.getItem("wpb_lang");if(saved)applyLang(saved);else{let nav=(navigator.language||"en").toLowerCase();if(nav.startsWith("ko"))applyLang("ko");else if(nav.startsWith("zh"))applyLang("zh");else applyLang("en")}
    $$(".chip").forEach(b=>b.addEventListener("click",()=>applyLang(b.dataset.lang)));

    // SW
    if("serviceWorker"in navigator){navigator.serviceWorker.register("sw.js");}

    // install banner
    let dp;const bar=$("#install"),btn=$("#btnInstall"),later=$("#btnLater");
    window.addEventListener("beforeinstallprompt",e=>{e.preventDefault();dp=e;bar.classList.add("show")});
    btn.onclick=async()=>{if(!dp)return;dp.prompt();await dp.userChoice;dp=null;bar.classList.remove("show")};
    later.onclick=()=>bar.classList.remove("show");
  </script>
</body>
</html>
