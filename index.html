<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title data-i18n="title">ì„¸ê³„íŒŒì´ì€í–‰ Â· World Pi Bank</title>
  <meta name="description" data-i18n="meta">
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Ccircle cx='32' cy='32' r='32' fill='%235a1b80'/%3E%3Ctext x='50%25' y='56%25' text-anchor='middle' font-size='28' fill='white'%3E%CF%80%3C/text%3E%3C/svg%3E" />
  <style>
    :root{
      --bg:#2a0b48; --card:#401463; --ink:#ffffff; --muted:#d9c7ef; --accent:#ffb400;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Malgun Gothic,sans-serif;
      color:var(--ink); background:linear-gradient(180deg,#2a0b48 0%, #21093a 100%);
      display:flex; min-height:100%; align-items:stretch; justify-content:center;
    }
    .wrap{width:100%; max-width:900px; padding:28px 18px 90px; position:relative}
    header{text-align:center; margin:18px 0 16px}
    .lang{
      position:absolute; right:14px; top:10px; display:flex; gap:8px; align-items:center;
      font-size:12px; opacity:.9; background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.15);
      padding:6px 8px; border-radius:12px;
    }
    .lang button{
      all:unset; cursor:pointer; padding:2px 6px; border-radius:8px;
    }
    .lang button.active{ background:#ffb400; color:#2a0b48; font-weight:800 }
    h1{margin:.2rem 0 .4rem; font-size: clamp(28px, 5vw, 44px); letter-spacing:.5px; font-weight:800}
    .sub{opacity:.9; color:var(--muted); font-size:clamp(14px,2.7vw,18px)}
    .grid{ display:grid; gap:14px; margin:22px 0 10px; grid-template-columns: repeat(2, 1fr); }
    .card{
      background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08);
      border-radius:18px; padding:18px 16px; backdrop-filter: blur(6px);
      display:flex; gap:12px; align-items:flex-start; min-height:108px;
      transition:transform .15s ease, background .15s ease;
    }
    .card:hover{ transform:translateY(-2px); background:rgba(255,255,255,.1) }
    .ico{font-size:28px; line-height:1}
    .txt .title{font-size:18px; font-weight:700}
    .txt .desc{margin-top:6px; font-size:13px; color:var(--muted)}
    .email{word-break:break-all}
    .cta{ margin:14px auto 0; display:flex; gap:10px; justify-content:center; flex-wrap:wrap; }
    .btn{ background:#ffb400; color:#2a0b48; border:0; padding:10px 14px; border-radius:12px; font-weight:700; cursor:pointer; }
    .ghost{background:transparent; color:#ffd27a; border:1px solid rgba(255,255,255,.25)}
    footer{ margin:26px auto 0; display:flex; gap:16px; align-items:center; justify-content:center; flex-wrap:wrap; }
    .qr{ width:132px; height:132px; border-radius:10px; background:#fff; display:grid; place-items:center; overflow:hidden; border:0 }
    .links{font-size:13px; opacity:.9}
    .links a{color:#cbb6ff; text-decoration:none}
    .links a:hover{text-decoration:underline}
    @media(min-width:860px){ .wrap{padding:40px 24px 110px} .card{min-height:120px} }
  </style>
  <script defer src="https://sdk.minepi.com/pi-sdk.js"></script>
</head>
<body>
  <div class="wrap">
    <!-- ì–¸ì–´ í† ê¸€ -->
    <div class="lang" role="group" aria-label="language-toggle">
      <span>Language</span>
      <button id="btnKO" type="button">KO</button>
      <button id="btnEN" type="button">EN</button>
    </div>

    <header>
      <h1 data-i18n="h1">ì„¸ê³„íŒŒì´ì€í–‰</h1>
      <div class="sub" data-i18n="subtitle">íŒŒì´ ë””ì§€í„¸ ì€í–‰</div>
    </header>

    <!-- ì„œë¹„ìŠ¤ 2ì¤„ -->
    <section class="grid" aria-label="services-row-1">
      <article class="card">
        <div class="ico">âœˆï¸</div>
        <div class="txt">
          <div class="title" data-i18n="pay_title">ê²°ì œ/ë³´ë‚´ê¸°</div>
          <div class="desc" data-i18n="pay_desc">ìƒì¸/ê°œì¸</div>
        </div>
      </article>
      <article class="card">
        <div class="ico">ğŸ</div>
        <div class="txt">
          <div class="title" data-i18n="rew_title">ë³´ìƒ</div>
          <div class="desc" data-i18n="rew_desc">ì°¸ì—¬ ì¸ì„¼í‹°ë¸Œ</div>
        </div>
      </article>
    </section>

    <section class="grid" aria-label="services-row-2">
      <article class="card">
        <div class="ico">âœ‹</div>
        <div class="txt">
          <div class="title" data-i18n="ubi_title">UBI</div>
          <div class="desc" data-i18n="ubi_desc">ê¸°ë³¸ì†Œë“</div>
        </div>
      </article>
      <article class="card">
        <div class="ico">â˜ï¸</div>
        <div class="txt">
          <div class="title" data-i18n="cs_title">ê³ ê°ì„¼í„°</div>
          <div class="desc email" data-i18n="cs_desc">ğŸ“§ ljw2358@naver.com</div>
        </div>
      </article>
    </section>

    <!-- (ì˜µì…˜) SDK ë°ëª¨ ë²„íŠ¼ -->
    <div class="cta">
      <button class="btn" id="piLoginBtn" data-i18n="login_btn">Pi ë¡œê·¸ì¸</button>
      <a class="btn ghost" href="mailto:ljw2358@naver.com" data-i18n="mail_btn">ì´ë©”ì¼ ë¬¸ì˜</a>
    </div>

    <!-- í•˜ë‹¨ QR + ì •ì±… -->
    <footer>
      <a class="qr" href="https://ljw2358.github.io/worldpibank/" aria-label="QR to World Pi Bank">
        <img alt="QR" width="128" height="128"
             src="https://api.qrserver.com/v1/create-qr-code/?size=128x128&data=https%3A%2F%2Fljw2358.github.io%2Fworldpibank%2F"/>
      </a>
      <div class="links">
        <a href="./terms.html" data-i18n="terms">ì´ìš©ì•½ê´€</a> Â·
        <a href="./privacy.html" data-i18n="privacy">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
      </div>
    </footer>
  </div>

  <script>
    // ë‹¤êµ­ì–´ ë¦¬ì†ŒìŠ¤
    const STR = {
      ko: {
        title: "ì„¸ê³„íŒŒì´ì€í–‰ Â· World Pi Bank",
        meta: "ì„¸ê³„íŒŒì´ì€í–‰ â€” íŒŒì´ ë””ì§€í„¸ ì€í–‰. ê²°ì œ/ë³´ë‚´ê¸°, ë³´ìƒ, UBI, ê³ ê°ì„¼í„°",
        h1: "ì„¸ê³„íŒŒì´ì€í–‰",
        subtitle: "íŒŒì´ ë””ì§€í„¸ ì€í–‰",
        pay_title: "ê²°ì œ/ë³´ë‚´ê¸°",
        pay_desc: "ìƒì¸/ê°œì¸",
        rew_title: "ë³´ìƒ",
        rew_desc: "ì°¸ì—¬ ì¸ì„¼í‹°ë¸Œ",
        ubi_title: "UBI",
        ubi_desc: "ê¸°ë³¸ì†Œë“",
        cs_title: "ê³ ê°ì„¼í„°",
        cs_desc: "ğŸ“§ ljw2358@naver.com",
        login_btn: "Pi ë¡œê·¸ì¸",
        mail_btn: "ì´ë©”ì¼ ë¬¸ì˜",
        terms: "ì´ìš©ì•½ê´€",
        privacy: "ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨"
      },
      en: {
        title: "World Pi Bank Â· Pi Digital Bank",
        meta: "World Pi Bank â€” Pi Digital Bank. Payments/Transfers, Rewards, UBI, Customer Support",
        h1: "World Pi Bank",
        subtitle: "Pi Digital Bank",
        pay_title: "Payments / Transfers",
        pay_desc: "Merchant / Personal",
        rew_title: "Rewards",
        rew_desc: "Participation Incentives",
        ubi_title: "UBI",
        ubi_desc: "Universal Basic Income",
        cs_title: "Customer Support",
        cs_desc: "ğŸ“§ ljw2358@naver.com",
        login_btn: "Sign in with Pi",
        mail_btn: "Email Support",
        terms: "Terms of Service",
        privacy: "Privacy Policy"
      }
    };

    // ì–¸ì–´ ì ìš©
    function applyLang(lang) {
      const dict = STR[lang] || STR.ko;
      document.documentElement.lang = (lang === 'en' ? 'en' : 'ko');
      // title + meta
      const meta = document.querySelector('meta[name="description"]');
      if (meta) meta.setAttribute('content', dict.meta || '');
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (dict[key] !== undefined) el.textContent = dict[key];
      });
      // ë²„íŠ¼ ìƒíƒœ
      document.getElementById('btnKO').classList.toggle('active', lang==='ko');
      document.getElementById('btnEN').classList.toggle('active', lang==='en');
      // ì €ì¥
      try { localStorage.setItem('wpb_lang', lang); } catch(e){}
      // íƒ­ ì œëª©
      document.title = dict.title || document.title;
    }

    function detectDefaultLang(){
      try {
        const saved = localStorage.getItem('wpb_lang');
        if (saved) return saved;
      } catch(e){}
      const nav = (navigator.language || navigator.userLanguage || 'ko').toLowerCase();
      return nav.startsWith('en') ? 'en' : 'ko';
    }

    // ì´ˆê¸°í™”
    (function init(){
      const initLang = detectDefaultLang();
      applyLang(initLang);

      document.getElementById('btnKO').addEventListener('click', ()=>applyLang('ko'));
      document.getElementById('btnEN').addEventListener('click', ()=>applyLang('en'));

      // Pi SDK ë°ëª¨
      if (window.Pi){
        Pi.init({ version: "2.0" });
        const btn = document.getElementById('piLoginBtn');
        btn.addEventListener('click', async () => {
          try{
            const scopes = ['payments', 'username', 'wallet_address'];
            const auth = await Pi.authenticate(scopes, p => console.log('Incomplete payment:', p));
            alert((document.documentElement.lang==='en'
              ? `Welcome, ${auth?.user?.username}!`
              : `í™˜ì˜í•©ë‹ˆë‹¤, ${auth?.user?.username} ë‹˜!`));
          }catch(err){
            console.error(err);
            alert(document.documentElement.lang==='en'
              ? 'Pi authentication failed.'
              : 'Pi ì¸ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
          }
        });
      }
    })();
  </script>
</body>
</html>
