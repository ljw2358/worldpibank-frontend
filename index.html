<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PiKoreaBank</title>
<style>
  :root{
    --bg1:#3b1e6e; --bg2:#6b36d3; --card:#ffffff0f; --text:#f7f5ff;
    --accent:#8b5cf6; --accent2:#22c55e; --muted:#c7bde6; --shadow:0 10px 24px rgba(0,0,0,.25);
  }
  *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
  body{
    margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Noto Sans KR, Apple SD Gothic Neo, sans-serif;
    color:var(--text); background:linear-gradient(180deg,var(--bg1),var(--bg2)) fixed;
  }
  /* Top notice (test mode banner space saver) */
  .wrap{max-width:860px;margin:0 auto;padding:14px 14px 92px}
  header{
    display:flex;align-items:center;justify-content:space-between;gap:12px;margin:4px 0 10px;
  }
  .brand{display:flex;align-items:center;gap:10px}
  .logo{
    width:42px;height:42px;border-radius:12px;
    background:radial-gradient(circle at 35% 30%,#ffbe55,#ff6a00);
    display:grid;place-items:center;box-shadow:var(--shadow)
  }
  .logo span{font-weight:700;font-size:22px;color:#3b1e00}
  h1{font-size:20px;line-height:1;margin:0}
  .tag{font-size:12px;color:var(--muted)}
  .lang{appearance:none;border:1px solid #ffffff33;background:#ffffff14;color:var(--text);
    border-radius:10px;padding:10px 12px;font-size:14px}
  /* Login */
  .login-btn{
    border:0;border-radius:12px;padding:12px 14px;font-weight:700;
    background:#8a71ff; color:#fff; box-shadow:var(--shadow); display:inline-flex; align-items:center; gap:8px;
  }
  .login-btn[disabled]{opacity:.55}
  /* Hero */
  .hero{
    margin:14px 0 10px; padding:22px;
    background:linear-gradient(160deg,#2d145b,#4b1e9c 60%, #6b36d3);
    border-radius:22px; box-shadow:var(--shadow); position:relative; overflow:hidden;
  }
  .hero h2{font-size:28px;margin:0 0 6px}
  .hero p{margin:0;color:#e6ddff}
  .pi-seal{
    position:absolute;left:50%;bottom:-30px;transform:translateX(-50%);
    width:140px;height:140px;border-radius:50%;
    background:radial-gradient(circle at 35% 30%,#ffb84d,#ff7a00 60%,#ff6a00);
    display:grid;place-items:center;filter:drop-shadow(0 16px 30px rgba(0,0,0,.35));
  }
  .pi-seal span{font-size:62px;font-weight:900;color:#3b1e00}
  /* Quick actions grid */
  .grid{
    display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:18px
  }
  .card{
    background:var(--card);border:1px solid #ffffff22;border-radius:18px;padding:16px;
    backdrop-filter: blur(6px);
  }
  .card h3{margin:0 0 6px;font-size:16px}
  .pill{display:inline-block;padding:4px 10px;border-radius:999px;font-size:12px;background:#ffffff22}
  .actions{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-top:6px}
  .action{
    background:#ffffff10;border:1px solid #ffffff22;border-radius:14px;padding:12px 8px;text-align:center
  }
  .action b{display:block;font-size:12px;margin-top:6px}
  /* Mini chat bar placeholder */
  .chat{
    margin-top:12px;border-radius:16px;background:#ffffff10;border:1px solid #ffffff22; padding:10px
  }
  .chat input{
    width:100%;padding:12px;border-radius:12px;border:1px solid #ffffff22;background:#120a29;color:#fff
  }
  /* Bottom nav */
  nav{
    position:fixed;left:0;right:0;bottom:0;background:rgba(14,6,30,.88);backdrop-filter:blur(6px);
    border-top:1px solid #ffffff1c
  }
  .tabs{max-width:860px;margin:0 auto;display:grid;grid-template-columns:repeat(5,1fr);gap:6px;padding:10px}
  .tab{color:#cfc7ef;text-align:center;font-size:12px;padding:8px 0}
  .tab.active{color:#b399ff;font-weight:700}
  /* QR (small, left-bottom corner above nav) */
  .qr{
    position:fixed;left:10px;bottom:86px;width:70px;height:70px;border-radius:12px;
    background:#fff;display:grid;place-items:center;box-shadow:var(--shadow);overflow:hidden
  }
  .qr img{width:100%;height:100%;object-fit:cover}
  /* Feedback row (Dislike/Like/Stake/Next) */
  .fb{
    max-width:860px;margin:12px auto 92px;display:grid;grid-template-columns:repeat(4,1fr);gap:10px
  }
  .fb button{
    border-radius:12px;border:1px solid #ffffff26;background:#ffffff12;color:#fff;padding:12px;font-weight:700
  }
  @media(min-width:700px){
    .grid{grid-template-columns:repeat(4,1fr)}
    .hero h2{font-size:34px}
    .pi-seal{width:160px;height:160px}
  }
</style>
</head>
<body>
  <div class="wrap">
    <!-- Header -->
    <header>
      <div class="brand">
        <div class="logo"><span>π</span></div>
        <div>
          <h1 id="title">PiKoreaBank</h1>
          <div class="tag" id="subtitle">노동 없이도, 기본소득이 가능하다</div>
        </div>
      </div>
      <div style="display:flex; align-items:center; gap:8px">
        <select id="lang" class="lang" aria-label="language">
          <option value="ko">한국어</option>
          <option value="en">English</option>
        </select>
        <button id="login" class="login-btn" aria-label="Login with Pi">🔑 Login with Pi</button>
      </div>
    </header>

    <!-- Hero -->
    <section class="hero">
      <h2 id="heroTitle">Global Digital Bank</h2>
      <p id="heroLine">AI × Web3 × Pi — 시민을 위한 디지털 기본소득</p>
      <div class="pi-seal"><span>π</span></div>
    </section>

    <!-- Quick cards -->
    <section class="grid">
      <div class="card">
        <h3 id="balTitle">총 잔액</h3>
        <div class="pill" id="balHint">Login 후 확인</div>
        <div class="actions" style="margin-top:10px">
          <div class="action"><span>📤</span><b id="send">송금</b></div>
          <div class="action"><span>💳</span><b id="pay">결제</b></div>
          <div class="action"><span>🎁</span><b id="reward">보상</b></div>
          <div class="action"><span>⚖️</span><b id="ubi">UBI</b></div>
        </div>
      </div>

      <div class="card">
        <h3 id="market">Pi 마켓</h3>
        <div class="pill">pimarket</div>
        <div class="actions" style="margin-top:10px">
          <div class="action"><span>📱</span><b id="elec">전자기기</b></div>
          <div class="action"><span>🛠️</span><b id="svc">서비스</b></div>
          <div class="action"><span>👕</span><b id="fashion">패션</b></div>
          <div class="action"><span>🏠</span><b id="home">생활</b></div>
        </div>
      </div>

      <div class="card">
        <h3 id="donation">후원 연결</h3>
        <div class="pill">linktr.ee/hyekong</div>
        <div class="actions" style="margin-top:10px">
          <div class="action"><span>🏦</span><b id="bank">계좌</b></div>
          <div class="action"><span>🪙</span><b id="wallet">Pi 지갑</b></div>
          <div class="action"><span>🎫</span><b id="culture">컬쳐랜드</b></div>
          <div class="action"><span>🔗</span><b id="links">링크</b></div>
        </div>
      </div>

      <div class="card">
        <h3 id="news">라이브/뉴스</h3>
        <div class="pill">GCV • OnRamp • Domains</div>
        <div class="actions" style="margin-top:10px">
          <div class="action"><span>▶️</span><b id="live">YouTube</b></div>
          <div class="action"><span>🎬</span><b id="shorts">Shorts</b></div>
          <div class="action"><span>📰</span><b id="brief">브리핑</b></div>
          <div class="action"><span>💬</span><b id="community">커뮤니티</b></div>
        </div>
      </div>
    </section>

    <!-- Mini chat placeholder -->
    <div class="chat">
      <input id="chat" placeholder="안내: 노동 없이도 기본소득이 가능합니다. AI로만 작동됩니다." />
    </div>

    <!-- Feedback buttons (for App Studio test) -->
    <div class="fb">
      <button>Dislike</button><button>Like</button><button>Stake</button><button>Next ➜</button>
    </div>
  </div>

  <!-- Small QR fixed at left-bottom -->
  <div class="qr" aria-hidden="true" title="Support QR">
    <!-- 임시 QR (원하는 이미지 URL로 교체 가능) -->
    <img src="https://api.qrserver.com/v1/create-qr-code/?size=140x140&data=pi://pikoreabank" alt="QR" />
  </div>

  <!-- Bottom nav -->
  <nav>
    <div class="tabs">
      <div class="tab active">Home</div>
      <div class="tab">Search</div>
      <div class="tab">Post</div>
      <div class="tab">Messages</div>
      <div class="tab">Profile</div>
    </div>
  </nav>

<script>
/* ===== Language toggle (KR/EN) ===== */
const T = {
  ko: {
    title:"PiKoreaBank", sub:"노동 없이도, 기본소득이 가능하다",
    heroTitle:"Global Digital Bank", heroLine:"AI × Web3 × Pi — 시민을 위한 디지털 기본소득",
    balTitle:"총 잔액", send:"송금", pay:"결제", reward:"보상", ubi:"UBI",
    market:"Pi 마켓", elec:"전자기기", svc:"서비스", fashion:"패션", home:"생활",
    donation:"후원 연결", bank:"계좌", wallet:"Pi 지갑", culture:"컬쳐랜드", links:"링크",
    news:"라이브/뉴스", live:"YouTube", shorts:"Shorts", brief:"브리핑", community:"커뮤니티"
  },
  en: {
    title:"PiKoreaBank", sub:"Basic income without labor — powered by AI",
    heroTitle:"Global Digital Bank", heroLine:"AI × Web3 × Pi — Digital Basic Income for Citizens",
    balTitle:"Total Balance", send:"Send", pay:"Pay", reward:"Rewards", ubi:"UBI",
    market:"Pi Market", elec:"Electronics", svc:"Services", fashion:"Fashion", home:"Home",
    donation:"Support", bank:"Bank", wallet:"Pi Wallet", culture:"CultureLand", links:"Links",
    news:"Live/News", live:"YouTube", shorts:"Shorts", brief:"Briefing", community:"Community"
  }
};
const $ = (id)=>document.getElementById(id);
function applyLang(l){
  const d=T[l]; if(!d) return;
  $("title").textContent=d.title; $("subtitle").textContent=d.sub;
  $("heroTitle").textContent=d.heroTitle; $("heroLine").textContent=d.heroLine;
  $("balTitle").textContent=d.balTitle; $("send").textContent=d.send; $("pay").textContent=d.pay;
  $("reward").textContent=d.reward; $("ubi").textContent=d.ubi;
  $("market").textContent=d.market; $("elec").textContent=d.elec; $("svc").textContent=d.svc;
  $("fashion").textContent=d.fashion; $("home").textContent=d.home;
  $("donation").textContent=d.donation; $("bank").textContent=d.bank; $("wallet").textContent=d.wallet;
  $("culture").textContent=d.culture; $("links").textContent=d.links;
  $("news").textContent=d.news; $("live").textContent=d.live; $("shorts").textContent=d.shorts;
  $("brief").textContent=d.brief; $("community").textContent=d.community;
}
const userLang = (navigator.language||"ko").startsWith("en") ? "en":"ko";
$("lang").value = userLang; applyLang(userLang);
$("lang").addEventListener("change", e=>applyLang(e.target.value));

/* ===== Pi Login (safe guard: only runs inside Pi Browser) ===== */
const loginBtn = $("login");
function setLoggedIn(username){
  loginBtn.textContent = "✔ " + (T[$("lang").value]===T.en ? "Logged in: ":"로그인: ") + username;
  loginBtn.disabled = true;
  document.querySelector(".pill").textContent = (T[$("lang").value]===T.en ? "Connected":"연결 완료");
}
async function piLogin(){
  try{
    if(!window.Pi){ alert("Pi Browser에서 열어주세요."); return; }
    // Initialize (idempotent)
    Pi.init({ version:"2.0" });
    // Authenticate
    const scopes = ['payments','username'];
    const auth = await Pi.authenticate(scopes, onIncompletePayment);
    const username = auth?.user?.username || "pioneer";
    setLoggedIn(username);
  }catch(e){
    console.error(e);
    alert("로그인 실패: " + (e?.message||e));
  }
}
function onIncompletePayment(payment){ console.log("incomplete payment", payment); }
loginBtn.addEventListener("click", piLogin);
</script>
</body>
</html>
