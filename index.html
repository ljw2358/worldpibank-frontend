<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>World Pi Bank â€” Web3 + AI</title>
  <meta name="theme-color" content="#4B0082" />

  <!-- PWA Manifest (ì•„ì´ì½˜ ë‚´ì¥) -->
  <link rel="manifest" href='data:application/manifest+json,{
    "name":"World Pi Bank",
    "short_name":"PiBank",
    "start_url":".",
    "display":"standalone",
    "background_color":"#4B0082",
    "theme_color":"#4B0082",
    "icons":[
      {"src":"data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><rect fill=\"%234B0082\" width=\"512\" height=\"512\" rx=\"96\"/><text x=\"50%\" y=\"58%\" text-anchor=\"middle\" font-size=\"300\" fill=\"white\" font-family=\"Arial, Helvetica, sans-serif\">Ï€</text></svg>","sizes":"192x192","type":"image/svg+xml"},
      {"src":"data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><rect fill=\"%234B0082\" width=\"512\" height=\"512\" rx=\"96\"/><text x=\"50%\" y=\"58%\" text-anchor=\"middle\" font-size=\"300\" fill=\"white\" font-family=\"Arial, Helvetica, sans-serif\">Ï€</text></svg>","sizes":"512x512","type":"image/svg+xml"}
    ]
  }'>
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Crect fill='%234B0082' width='512' height='512' rx='96'/%3E%3Ctext x='50%25' y='58%25' text-anchor='middle' font-size='300' fill='white' font-family='Arial, Helvetica, sans-serif'%3E%CF%80%3C/text%3E%3C/svg%3E'>

  <style>
    :root{ --purple:#4B0082; --white:#fff;}
    *{ box-sizing:border-box;}
    body{ margin:0; background:var(--purple); color:var(--white);
          font-family:Arial,"Noto Sans CJK KR","Noto Sans SC",sans-serif;
          text-align:center; padding:20px;}
    .wrap{ max-width:980px; margin:0 auto;}
    h1{ margin:6px 0 4px; font-size:1.45rem;}
    .slogan{ margin:8px 0 14px; line-height:1.5; opacity:.95;}
    .grid{ display:flex; flex-direction:column; gap:10px; align-items:center; margin:12px 0;}
    .btn{ display:block; width:100%; max-width:460px; padding:12px 14px;
          background:#fff; color:var(--purple); border-radius:12px; font-weight:800; text-decoration:none;}
    .row{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-top:8px;}
    .card{ background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.15);
           border-radius:14px; padding:16px; margin:12px auto; text-align:left;}
    .muted{ opacity:.9; font-size:.95rem;}
    pre{ white-space:pre-wrap; word-break:break-word; }
    a.inline{ color:#fff; text-decoration:underline;}
    .footer{ opacity:.85; font-size:.9rem; margin-top:12px;}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>ğŸŒ ì›”ë“œíŒŒì´ì€í–‰ / World Pi Bank / ä¸–ç•Œæ´¾é“¶è¡Œ</h1>

    <div class="slogan">
      KR: <b>Web3 + AI</b>ë¡œ ì‘ë™í•˜ëŠ” ì„¸ê³„ ë””ì§€í„¸ ì€í–‰<br>
      EN: The worldâ€™s digital bank powered by <b>Web3 + AI</b><br>
      ZH: ç”±<b>Web3 ä¸ AI</b>é©±åŠ¨çš„å…¨çƒæ•°å­—é“¶è¡Œ
    </div>

    <!-- Pi SDK ë°ëª¨(ë¸Œë¼ìš°ì €ì—ì„œë§Œ ë™ì‘) + ë°±ì—”ë“œ ì—°ë™ ë²„íŠ¼ -->
    <div class="row">
      <a class="btn" href="#" onclick="doAuth();return false;">ğŸ” Pi ë¡œê·¸ì¸ / Login / ç™»å½•</a>
      <a class="btn" href="#" onclick="doPayment();return false;">ğŸ’³ ê²°ì œ Demo / Payment / æ”¯ä»˜</a>
      <a class="btn" href="#" onclick="fetchFAQFromBackend();return false;">ğŸ“– FAQ(ë°±ì—”ë“œ) ë¶ˆëŸ¬ì˜¤ê¸°</a>
      <a class="btn" href="#" onclick="fetchTxFromBackend();return false;">ğŸ’° ê±°ë˜ë‚´ì—­(ë°±ì—”ë“œ) ë¶ˆëŸ¬ì˜¤ê¸°</a>
    </div>

    <!-- 6ê°€ì§€ í•µì‹¬ ì„œë¹„ìŠ¤(í•œÂ·ì˜Â·ì¤‘ ë™ì‹œ í‘œê¸°) -->
    <div class="grid">
      <a class="btn" href="#">â‘  ì†¡ê¸ˆ Â· Transfer Â· è½¬è´¦</a>
      <a class="btn" href="#">â‘¡ ê²°ì œ Â· Payment Â· æ”¯ä»˜</a>
      <a class="btn" href="#">â‘¢ ë¦¬ì›Œë“œ Â· Rewards Â· å¥–åŠ±</a>
      <a class="btn" href="#">â‘£ ì˜ˆì¹˜ Â· Deposit Â· å­˜æ¬¾</a>
      <a class="btn" href="#">â‘¤ ê¸°ë³¸ì†Œë“ Â· UBI Â· åŸºæœ¬æ”¶å…¥</a>
      <a class="btn" href="#faq">â‘¥ ê³ ê°ì„¼í„° Â· FAQ Â· å®¢æœ</a>
    </div>

    <!-- README / ì—°ë½ì²˜ -->
    <div class="card muted">
      <b>README</b><br>
      Demo(GitHub Pages): ì´ í˜ì´ì§€ URL<br>
      Pi Browser: pi://worldpibank (App Studio ì œì¶œ ì˜ˆì •)<br>
      Contact: <a class="inline" href="mailto:ljw2358@naver.com">ljw2358@naver.com</a><br>
      Built on Web3 Â· Powered by AI
    </div>

    <!-- Vision -->
    <div class="card muted">
      <b>Vision / ë¹„ì „ / æ„¿æ™¯</b><br>
      KR: Web3 ì§€ê°‘=ì‹ ì›, AIëŠ” ì´ìƒê±°ë˜ íƒì§€Â·ìŠ¤í…Œì´í‚¹ ì¶”ì²œÂ·ìë™ê²°ì œë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.<br>
      EN: Wallet-as-identity on Web3; AI powers fraud detection, staking recommendations, and auto-payments.<br>
      ZH: Web3 é’±åŒ…å³èº«ä»½ï¼›AI ç”¨äºå¼‚å¸¸æ£€æµ‹ã€è´¨æŠ¼æ¨èä¸è‡ªåŠ¨æ”¯ä»˜ã€‚
    </div>

    <!-- FAQ (ê¸°ë³¸ í‘œê¸° + ë°±ì—”ë“œë¡œ ëŒ€ì²´ ë¡œë”© ë²„íŠ¼ ìœ„ì— ìˆìŒ) -->
    <div id="faq" class="card muted">
      <b>FAQ (í•œÂ·ì˜Â·ì¤‘)</b><br><br>
      <b>Q1. KYC?</b><br>
      KR: ë¡œì»¬ ì•”í˜¸í™” ê²€ì¦, ìµœì†Œ ë°ì´í„° ì €ì¥. <br>
      EN: Local encrypted verification; minimal data stored. <br>
      ZH: æœ¬åœ°åŠ å¯†éªŒè¯ï¼Œä»…ä¿å­˜æœ€å°‘æ•°æ®ã€‚ <br><br>

      <b>Q2. ë³´ì•ˆ(Security)?</b><br>
      KR: í•˜ë“œì›¨ì–´ í‚¤, ë‹¤ì¤‘ì„œëª…, ì´ìƒê±°ë˜ íƒì§€. <br>
      EN: Hardware keys, multi-signature, anomaly detection. <br>
      ZH: ç¡¬ä»¶å¯†é’¥ã€å¤šé‡ç­¾åã€å¼‚å¸¸äº¤æ˜“æ£€æµ‹ã€‚ <br><br>

      <b>Q3. ìˆ˜ìˆ˜ë£Œ/ì´ìœ¨(Fees/APY)?</b><br>
      KR: íˆ¬ëª… ê³µì‹œ, ì‹œì¥ ì—°ë™ ì¡°ì •. <br>
      EN: Transparent fees; APY adjusts with market. <br>
      ZH: æ‰‹ç»­è´¹é€æ˜ï¼›APY éšå¸‚åœºè°ƒæ•´ã€‚
    </div>

    <div class="footer">ğŸ“² í™ˆ í™”ë©´ì— ì¶”ê°€(PWA) ê°€ëŠ¥ Â· PCì™€ ëª¨ë°”ì¼ì—ì„œ ë™ì¼í•œ ë‚´ìš©ì´ ë³´ì…ë‹ˆë‹¤.</div>
  </div>

  <!-- Pi SDK (Pi Browserì—ì„œë§Œ ë™ì‘) -->
  <script src="https://downloads.minepi.com/sdk/v1/prod.js"></script>

  <script>
    // âœ… ë°°í¬ëœ ë°±ì—”ë“œ URLë¡œ ì„¤ì •
    const API_BASE = "https://worldpibank-backend.onrender.com";

    // Pi SDK ì´ˆê¸°í™”(ê°€ëŠ¥í•œ í™˜ê²½ì—ì„œë§Œ)
    if (window.Pi && Pi.init) {
      Pi.init({ version: "2.0", sandbox: true });
    }

    async function doAuth(){
      try {
        if (!window.Pi || !Pi.authenticate) return alert("Pi Browserì—ì„œ ì—´ì–´ì£¼ì„¸ìš”.");
        const auth = await Pi.authenticate(['username','payments']);
        alert("Logged in as @" + (auth.user?.username || "unknown"));
      } catch (e) { console.error(e); alert("ë¡œê·¸ì¸ ì‹¤íŒ¨"); }
    }

    function doPayment(){
      if (!window.Pi || !Pi.createPayment) return alert("Pi Browserì—ì„œ ì—´ì–´ì£¼ì„¸ìš”.");
      const paymentData = { amount: 3.14, memo: "World Pi Bank Demo", metadata:{ itemId:"demo-001" } };
      const cbs = {
        onReadyForServerApproval: (paymentId) => {
          fetch(API_BASE + "/payments/approve", {
            method: "POST", headers: { "Content-Type":"application/json" },
            body: JSON.stringify({ paymentId })
          }).catch(console.error);
        },
        onReadyForServerCompletion: (paymentId, txid) => {
          fetch(API_BASE + "/payments/complete", {
            method: "POST", headers: { "Content-Type":"application/json" },
            body: JSON.stringify({ paymentId, txid })
          }).catch(console.error);
        },
        onCancel: () => alert("ê²°ì œ ì·¨ì†Œ"),
        onError: (err) => { console.error(err); alert("ê²°ì œ ì˜¤ë¥˜"); }
      };
      try { Pi.createPayment(paymentData, cbs); } catch(e){ console.error(e); alert("ê²°ì œ ì‹œì‘ ì‹¤íŒ¨"); }
    }

    // ë°±ì—”ë“œì—ì„œ FAQ/ê±°ë˜ë‚´ì—­ ê°€ì ¸ì˜¤ê¸°
    async function fetchFAQFromBackend(){
      try {
        const r = await fetch(API_BASE + "/faq");
        const data = await r.json();
        const html = data.map(x => `<p>â“ ${x.q}<br>KR: ${x.a_kr}<br>EN: ${x.a_en}<br>ZH: ${x.a_zh}</p>`).join("");
        document.getElementById("faq").innerHTML = "<b>FAQ (from backend)</b><br>" + html;
      } catch(e){ console.error(e); alert("FAQ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨"); }
    }
    async function fetchTxFromBackend(){
      try {
        const r = await fetch(API_BASE + "/transactions");
        const data = await r.json();
        alert("Transactions: " + JSON.stringify(data));
      } catch(e){ console.error(e); alert("ê±°ë˜ë‚´ì—­ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨"); }
    }

    // ê°„ë‹¨ Service Worker ë“±ë¡(PWA)
    const swCode = `
      self.addEventListener('install', e => {
        e.waitUntil(caches.open('wpb-v1').then(c=>c.addAll(['.'])));
      });
      self.addEventListener('fetch', e => {
        e.respondWith(caches.match(e.request).then(r=>r||fetch(e.request)));
      });
    `;
    if ('serviceWorker' in navigator) {
      const blob = new Blob([swCode], { type:'text/javascript' });
      const url = URL.createObjectURL(blob);
      navigator.serviceWorker.register(url).catch(()=>{});
    }
  </script>
</body>
</html>
