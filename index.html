<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>월드파이은행 • World Pi Bank</title>

  <meta name="theme-color" content="#8a7aff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="월드파이은행">

  <style>
    :root{--bg:#1b1530;--panel:#241d46;--line:#3b2d70;--txt:#fff;--muted:#cfc7ff;--accent:#8a7aff;--accent2:#b9a6ff}
    *{box-sizing:border-box;margin:0;padding:0}
    body{background:var(--bg);color:var(--txt);font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR","Noto Sans SC",Arial;text-align:center;-webkit-text-size-adjust:100%}
    .wrap{max-width:560px;margin:0 auto;padding:0 14px 64px}
    .lang{position:fixed;top:12px;right:14px;display:flex;gap:6px;z-index:10}
    .lang button{padding:4px 8px;border-radius:6px;border:1px solid var(--accent);background:transparent;color:var(--accent);font-size:11px;cursor:pointer}
    .lang button.active{background:var(--accent);color:#0f0b1e;font-weight:700}
    h1{margin-top:44px;font-size:clamp(18px,5vw,22px);font-weight:900;white-space:nowrap}
    #t_sub{margin:8px 0 20px;font-size:clamp(12px,3.5vw,14px);line-height:1.3;word-break:keep-all}
    .logo{margin:16px auto 20px;width:80px;height:80px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:radial-gradient(circle at 30% 30%,#b9a6ff,#8a7aff);font-size:32px;font-weight:900;color:#0f0b1e}
    .grid{display:grid;gap:10px}
    .card{background:var(--panel);border:1px solid var(--line);border-radius:14px;padding:12px;text-align:left}
    .row{display:flex;justify-content:space-between;align-items:center}
    .label{font-size:14px;font-weight:700}
    .badge{font-size:10px;padding:3px 6px;border-radius:999px;background:var(--accent);color:#0f0b1e;font-weight:700}
    .desc{margin-top:8px;font-size:12px;color:#cfc7ff;word-break:keep-all}
    .cta{display:flex;gap:6px;margin-top:10px;justify-content:center;flex-wrap:wrap}
    .btn{padding:6px 10px;border-radius:8px;font-weight:700;border:0;font-size:11px;cursor:pointer}
    .primary{background:var(--accent);color:#0f0b1e}
    .ghost{background:transparent;border:1px solid var(--accent2);color:var(--accent2)}
    footer{margin:40px 0 20px;font-size:clamp(10px,2.8vw,12px);color:#cfc7ff;white-space:nowrap}

    /* 설치 배너 */
    #installBar{position:fixed;bottom:0;left:0;right:0;background:var(--accent);color:#0f0b1e;padding:12px;display:none;justify-content:space-between;align-items:center;font-size:14px;z-index:999}
    #btnInstall{background:#0f0b1e;color:#fff;border:0;padding:6px 12px;border-radius:6px;font-weight:700;cursor:pointer;display:none}
  </style>
</head>
<body>
  <!-- 언어 선택 -->
  <div class="lang">
    <button id="btn-ko" data-lang="ko">KR</button>
    <button id="btn-en" data-lang="en">EN</button>
    <button id="btn-zh" data-lang="zh">中文</button>
  </div>

  <div class="wrap">
    <h1 id="t_title">월드파이은행</h1>
    <p id="t_sub">서민과 모두를 위한 디지털&nbsp;은행</p>
    <div class="logo">π</div>

    <section class="grid">
      <article class="card">
        <div class="row"><div class="label" id="t_pay">송금 / 결제</div><span class="badge" id="b1">LIVE</span></div>
        <p class="desc" id="t_pay_desc">빠르고 안전한 결제와 P2P 송금.</p>
      </article>
      <article class="card">
        <div class="row"><div class="label" id="t_reward">리워드</div><span class="badge" id="b2">POINTS</span></div>
        <p class="desc" id="t_reward_desc">참여·미션으로 포인트 적립, 서민과 함께 성장.</p>
      </article>
      <article class="card">
        <div class="row"><div class="label" id="t_stake">예치 (Staking)</div><span class="badge" id="b3">APY 31.4%</span></div>
        <p class="desc" id="t_stake_desc">유연한 기간, 투명한 금리. 예치로 수익을 만드세요.</p>
      </article>
      <article class="card">
        <div class="row"><div class="label" id="t_ubi">UBI (기본소득)</div><span class="badge" id="b4">BETA</span></div>
        <p class="desc" id="t_ubi_desc">노동자·서민도 함께 누리는 디지털 기본소득.</p>
      </article>
      <article class="card">
        <div class="row"><div class="label" id="t_support">고객센터</div><span class="badge" id="b5">HELP</span></div>
        <p class="desc" id="t_support_desc">계정·보안 문제 해결, 의견 접수.</p>
      </article>
      <article class="card">
        <div class="row"><div class="label" id="t_faq">FAQ / 보안</div><span class="badge" id="b6">OPEN</span></div>
        <p class="desc" id="t_faq_desc">해킹 방지, KYC 검증, 자주 묻는 질문.</p>
        <div class="cta">
          <button class="btn primary" id="t_btn_faq">Open FAQ</button>
          <button class="btn ghost" id="t_btn_demo">데모 보기</button>
        </div>
      </article>
    </section>

    <footer id="t_footer">© 2025 월드파이은행 • Build v28b</footer>
  </div>

  <!-- 설치 배너 -->
  <div id="installBar">
    <span id="t_banner">📲 월드파이은행을 설치하시겠습니까?</span>
    <button id="btnInstall">설치</button>
  </div>

<script>
/* ===== 환경 감지 ===== */
const UA = navigator.userAgent || "";
const isAndroid = /Android/i.test(UA);
const isChrome = /Chrome\/\d+/i.test(UA) && /Google/i.test(navigator.vendor||"");
const isEdge = /Edg\//i.test(UA);
const isSamsung = /SamsungBrowser/i.test(UA);
const isPi = /PiBrowser/i.test(UA);
const isIOS = /iPhone|iPad|iPod/i.test(UA);
const isDesktop = !/Mobi|Android|iPhone|iPad|iPod/i.test(UA);

/* ===== 다국어 리소스 ===== */
const L={
  ko:{title:"월드파이은행",sub:"서민과 모두를 위한 디지털&nbsp;은행",footer:"© 2025 월드파이은행 • 모두를 위한 은행",
      bannerInstall:"📲 월드파이은행을 설치하시겠습니까?", install:"설치",
      bannerGuideMobile:"📲 이 브라우저에서는 ‘홈 화면에 추가’로 설치하세요.",
      bannerGuidePi:"📲 Pi Browser: 메뉴에서 ‘홈 화면에 추가’로 설치하세요.",
      bannerGuideDesktop:"💡 PC에서는 주소창의 ‘+’ 버튼 또는 브라우저 메뉴로 설치할 수 있어요."},
  en:{title:"World Pi Bank",sub:"A digital&nbsp;bank for everyone",footer:"© 2025 World Pi Bank • A bank for everyone",
      bannerInstall:"📲 Install World Pi Bank?", install:"Install",
      bannerGuideMobile:"📲 In this browser, use “Add to Home Screen”.",
      bannerGuidePi:"📲 Pi Browser: use “Add to Home Screen”.",
      bannerGuideDesktop:"💡 On desktop, click the ‘+’ icon in the address bar to install."},
  zh:{title:"世界Pi银行",sub:"为所有人提供的数字银行",footer:"© 2025 世界Pi银行 • 属于所有人的银行",
      bannerInstall:"📲 要安装世界Pi银行吗？", install:"安装",
      bannerGuideMobile:"📲 在此浏览器中，请使用“添加到主屏幕”。",
      bannerGuidePi:"📲 Pi 浏览器：请使用“添加到主屏幕”。",
      bannerGuideDesktop:"💡 在电脑端，请点击地址栏的 “+” 图标进行安装。"}
};

function applyLang(code){
  const P=L[code]||L.ko;
  document.documentElement.lang=(code==="zh"?"zh":code==="en"?"en":"ko");
  t_title.textContent=P.title;
  t_sub.innerHTML=P.sub;
  t_footer.innerHTML=P.footer+" • Build v28b";
  t_btn_faq.textContent=(code==="ko"?"Open FAQ":code==="zh"?"打开 FAQ":"Open FAQ");
  t_btn_demo.textContent=(code==="ko"?"데모 보기":code==="zh"?"查看演示":"View Demo");

  // 배너 문구 기본값(환경 안내)
  let guide = P.bannerGuideMobile;
  if (isDesktop) guide = P.bannerGuideDesktop;
  if (isPi) guide = P.bannerGuidePi;
  t_banner.textContent = guide;
}
applyLang("ko");
btn-ko.onclick=()=>applyLang("ko");
btn-en.onclick=()=>applyLang("en");
btn-zh.onclick=()=>applyLang("zh");

/* ===== manifest & 아이콘(단일파일) ===== */
(function(){
  const makeIcon=(s)=>{
    const c=document.createElement("canvas");c.width=c.height=s;
    const ctx=c.getContext("2d"), r=s/2;
    const g=ctx.createRadialGradient(r*0.7,r*0.7,s*0.1,r,r,r);
    g.addColorStop(0,"#b9a6ff"); g.addColorStop(1,"#8a7aff");
    ctx.fillStyle=g; ctx.beginPath(); ctx.arc(r,r,r,0,Math.PI*2); ctx.fill();
    ctx.fillStyle="#0f0b1e"; ctx.font=`${Math.round(s*0.55)}px system-ui`;
    ctx.textAlign="center"; ctx.textBaseline="middle"; ctx.fillText("π",r,r+s*0.03);
    return c.toDataURL("image/png");
  };
  const icon192=makeIcon(192), icon512=makeIcon(512);
  const manifest={name:"월드파이은행 • World Pi Bank",short_name:"월드파이은행",start_url:".",display:"standalone",background_color:"#1b1530",theme_color:"#8a7aff",
    icons:[{src:icon192,sizes:"192x192",type:"image/png"},{src:icon512,sizes:"512x512",type:"image/png"}]};
  const blob=new Blob([JSON.stringify(manifest)],{type:"application/json"});
  const url=URL.createObjectURL(blob);
  const link=document.createElement("link");link.rel="manifest";link.href=url;document.head.appendChild(link);
  [["icon",icon192,"192x192"],["icon",icon512,"512x512"],["apple-touch-icon",icon512]].forEach(([rel,src,s])=>{
    const l=document.createElement("link");l.rel=rel;l.href=src;if(s)l.sizes=s;l.type="image/png";document.head.appendChild(l);
  });
})();

/* ===== 설치 배너 처리 ===== */
let deferredPrompt;
window.addEventListener('beforeinstallprompt',(e)=>{
  e.preventDefault();
  deferredPrompt=e;
  // 이벤트가 오면 설치 버튼까지 노출
  installBar.style.display="flex";
  btnInstall.style.display="inline-block";
  const lang=document.documentElement.lang;
  const P = (lang==="zh"?L.zh:(lang==="en"?L.en:L.ko));
  t_banner.textContent = P.bannerInstall;
});
btnInstall.addEventListener("click", async ()=>{
  if(deferredPrompt){
    deferredPrompt.prompt();
    await deferredPrompt.userChoice;
    deferredPrompt=null;
    installBar.style.display="none";
  }
});

// 이벤트가 없어도(일부 브라우저/PC) 안내 배너는 보여줌
window.addEventListener('load', ()=>{ installBar.style.display="flex"; });

/* ===== sw.js (동적 생성/등록) ===== */
if('serviceWorker' in navigator){
  const swCode=`self.addEventListener("install",()=>self.skipWaiting());self.addEventListener("activate",()=>self.clients.claim());`;
  const blob=new Blob([swCode],{type:"text/javascript"});
  const swURL=URL.createObjectURL(blob);
  navigator.serviceWorker.register(swURL).catch(console.warn);
}

/* 데모 버튼 */
t_btn_faq.onclick=()=>alert("FAQ는 곧 연결됩니다. (보안·KYC·해킹 피해 예방 안내)");
t_btn_demo.onclick=()=>alert("정적 데모 화면입니다.");
</script>
</body>
</html>
